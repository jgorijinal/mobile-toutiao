"use strict";(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[828],{8828:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("van-nav-bar",{attrs:{title:"登录","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),t("van-form",{ref:"formRef",on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"mobile",placeholder:"请输入手机号","left-icon":"phone-o",clearable:"",rules:e.userFormRules.mobile,type:"number",maxLength:"11"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),t("van-field",{attrs:{name:"code",placeholder:"请输入验证码","left-icon":"shield-o",rules:e.userFormRules.code},scopedSlots:e._u([{key:"button",fn:function(){return[e.countDownVisible?t("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(t){e.countDownVisible=!1}}}):e._e(),e.countDownVisible?e._e():t("van-button",{staticClass:"send-cms-btn",attrs:{"native-type":"button",round:"",size:"small",type:"primary"},on:{click:e.onSendSms}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{staticClass:"login-btn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("登录")])],1)],1)],1)},n=[],i=s(2900),r={data(){return{user:{mobile:"13888888123",code:"246810"},userFormRules:{mobile:[{required:!0,message:"手机号不能为空",trigger:"onBlur"},{pattern:/^1[3|5|7|8]\d{9}$/,message:"手机号码格式不正确",trigger:"onBlur"}],code:[{required:!0,message:"验证码不能为空",trigger:"onBlur"},{pattern:/^\d{6}$/,message:"验证码格式不正确",trigger:"onBlur"}]},countDownVisible:!1}},methods:{onSendSms(){this.$refs.formRef.validate("mobile").then((()=>(this.countDownVisible=!0,(0,i.em)(this.user.mobile)))).then((e=>{console.log(e),this.$toast("发送验证码成功")})).catch((e=>{console.log(e),e&&e.response&&429===e.response.status&&this.$toast.fail("发送请求太频繁, 请稍后重试")}))},async onSubmit(){this.$toast.loading({duration:0,message:"登录中...",forbidClick:!0});try{await this.$store.dispatch("user/loginAction",this.user),this.$toast.success("登录成功"),this.$router.push("/home")}catch(e){console.log(e),400===e.response.status?(console.log(e.response.data.message),this.$toast.fail(e.response.data.message+",请重新输入")):this.$toast.fail("登陆失败, 请稍后尝试")}}}},a=r,l=s(1001),u=(0,l.Z)(a,o,n,!1,null,"6036b8a8",null),c=u.exports}}]);
//# sourceMappingURL=828.9cf39c50.js.map